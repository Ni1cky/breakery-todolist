<Task>:
    task_checkbox: task_checkbox
    task_input_field: task_input_field
    make_imp_btn: make_imp_btn
    canvas:
        Color:
            rgba: 0, 0.31, 0.88, 0.7
        RoundedRectangle:
            radius: [(10, 10), (10, 10), (10, 10), (10, 10)]
            pos: self.pos
            size: self.size
    orientation: "horizontal"
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "center"
        size_hint: 0.1, 1
        MDCheckbox:
            size: "58dp", "58dp"
            selected_color: "#FFFC00"
            unselected_color: 1, 1, 1, 1
            on_press: root.mark_done()
            id: task_checkbox
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "center"
        size_hint: 0.7, 1
        MDTextField:
            font_size: self.height // 2.5
            theme_text_color: 'Custom'
            line_color_normal: 0, 0.31, 0.88, 0
            line_color_focus: "#FFF9BA"
            text_color_normal: 1, 1, 1, 1
            text_color_focus: "#FFF9BA"
            id: task_input_field
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "center"
        size_hint: 0.1, 1
        MDIconButton:
            icon: 'cards-heart-outline'
            # icon: 'cards-heart'
            # text_color: "#FF0000"
            theme_text_color: 'Custom'
            text_color: "#FFFFFF"
            on_press: root.make_important()
            id: make_imp_btn
    AnchorLayout:
        anchor_x: "center"
        anchor_y: "center"
        size_hint: 0.1, 1
        MDIconButton:
            icon: 'delete'
            theme_text_color: 'Custom'
            text_color: 1, 1, 1, 1
            on_press: root.delete_task()
            id: delete_btn

<ScrollViewTasksList>:
    ScrollView:
<SettingsMenu>:
    MDRaisedButton:
        id: button
        text: "PRESS ME"
        pos_hint: {"center_x": .5, "center_y": .5}
        on_release: app.menu.open()

<MenuButton>:
    theme_text_color: "Custom"
    text_color: 0, 0, 0, 1
    on_press: self.change_screen()
    IconLeftWidgetWithoutTouch:
        theme_text_color: "Custom"
        text_color: 0, 0, 0, 1


<LowerMenuLayout>:
    ScrollViewTasksList:
    MDIconButton:
	    on_press: root.children[0].add_new_list()
        icon:"plus"

<UpperMenuLayout>:
    #important_button: important_button
    #tasks_button: tasks_button
    #my_day_button: my_day_button

    orientation: "vertical"
    padding: "8dp"
    spacing: "8dp"
    MDLabel:
        text: "ToDo List"
        font_style: "Button"
        font_size: 20
        size_hint_y: None
        height: self.texture_size[1]

    MDLabel:
        text: "Авторы: Nicky, !!!, GOGX31, VadLord, RegreTTO, dion, Хитрый Страус"
        font_style: "Caption"
        size_hint_y: None
        height: self.texture_size[1]
    MenuButton:
        id: tasks_button
        screen_name: "tasks"
        icon: "home"
        text: "Задачи"
    MenuButton:
        id: important_button
        screen_name: "important"
        icon: "cards-heart"
        text: "Важно"
    MenuButton:
        id: my_day_button
        screen_name: "my_day"
        icon: "calendar"
        text: "Мой день"

<MainMenuLayout>:
    upper: upper
    lower: lower
    # on_press: nav_bar.set_state("open")
    MDNavigationDrawer:
        orientation: "vertical"
        halign: "top"
        md_bg_color: 1,1,1,1
        id: nav_bar
        opacity: 0
        UpperMenuLayout:
            id: upper
        LowerMenuLayout:
            id: lower

<MainContainer>:
    screen_manager: screen_manager
    main_menu: main_menu
    orientation: "vertical"
    ToolBar:
        size_hint_y: 64 / root.height
    MainMenuLayout:
        size_hint: 0.1, 1
        id: main_menu
    ScreenManager:
        size_hint: 0.9, 1
        id: screen_manager

<ToolBar>:
    search_text_field: search_text_field
    MDToolbar:
        size_hint_x: 0.45
        # left_action_items: [["menu", root.open_menu]]
        left_action_items: [["menu"]]
    BoxLayout:
        size_hint_x: 0.3
        canvas:
            Color:
                rgba: 0.129, 0.588, 0.953, 1
            Rectangle:
                pos: self.pos
                size: self.size
        AnchorLayout:
            anchor_x: "center"
            anchor_y: "top"
            MDTextField:
                id: search_text_field
                theme_text_color: 'Custom'
                color_active: 0.129, 0.588, 0.953, 1
                mode: "fill"
                fill_color_normal: 0.129, 0.588, 0.953, 1
                fill_color_focus: 0.129, 0.588, 0.953, 1
                text_color_normal: 1, 1, 1, 1
                text_color_focus: 1, 1, 1, 1
                font_size: self.height // 2.9
                line_color_focus: 1, 1, 1, 1
                hint_text: "Найти задачу"
                hint_text_color_normal: 1, 1, 1, 1
                # on_text: root.search_task()
    MDToolbar:
        size_hint_x: 0.25
        #  right_action_items: [["magnify", root.search_task], ["sort", root.sort_task], ["cog", root.open_settings]]
        right_action_items: [["magnify"], ["sort"], ["cog"]]

<TasksScreen>:
    tasks: tasks
    BoxLayout:
        orientation: "vertical"
        spacing: 15
        ScrollView:
            size: self.size
            do_scroll_y: True
            GridLayout:
                id: tasks
                padding: 5, 0
                cols: 1
                spacing: 15
                orientation: "bt-lr"
                row_default_height: 80
                size_hint_y: None
                height: self.minimum_height
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "bottom"
        size_hint: 0.98, 0.98
        pos_hint: {'y': 0.02}
        MDIconButton:
            icon: "plus"
            md_bg_color: rgba(128, 166, 255, 255)
            theme_text_color: 'Custom'
            text_color: 1, 1, 1, 1
            user_font_size: "45sp"
            on_press: root.add_task()
